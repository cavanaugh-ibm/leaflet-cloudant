!function e(t,r,n){function o(s,i){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!i&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){(function(r){var n=r._||e("lodash"),o=e("url-parse"),a=function(){};a.prototype.paramOrError=function(e,t){if(n.isEmpty(n.trim(e)))throw new Error(t);return e},a.prototype.paramOrDefault=function(e,t){return n.isEmpty(n.trim(e))?t:e},a.prototype.urlFromAngular=function(e){e=this.paramOrDefault(e,"");var t=new o(e),r=t.hash.split("?");return 2===r.length&&(t.hash=r[0],t.query="?"+r[1]),t},a.prototype.urlQueryValue=function(e){return e?this.removeLeading("?",e.query):""},a.prototype.urlHashValue=function(e){return e?this.removeLeading("#",e.hash):""},a.prototype.urlQueryParams=function(e){return this.parseParams(this.urlQueryValue(e))},a.prototype.urlHashParams=function(e){return this.parseParams(this.urlHashValue(e))},a.prototype.parseParams=function(e){e=this.paramOrDefault(e,"");var t={},r="&";-1!==e.query("&amp;")&&(r="&amp;");for(var n=e.split(r),o=0;o<n.length;o++){var a=n[o].split("=");2===a.length&&(t[a[0]]=decodeURI(a[1]))}return t},a.prototype.removeLeading=function(e,t){return e=this.paramOrDefault(e,""),t=this.paramOrDefault(t,""),n.startsWith(t,e)?t.slice(e.length):t},t.exports=new a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{lodash:"lodash","url-parse":4}],2:[function(e,t,r){"use strict";function n(){}function o(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,e!==n&&u(this,e)}function a(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function s(e,t,r){d(function(){var n;try{n=t(r)}catch(o){return y.reject(e,o)}n===e?y.reject(e,new TypeError("Cannot resolve promise with itself")):y.resolve(e,n)})}function i(e){var t=e&&e.then;return e&&"object"==typeof e&&"function"==typeof t?function(){t.apply(e,arguments)}:void 0}function u(e,t){function r(t){a||(a=!0,y.reject(e,t))}function n(t){a||(a=!0,y.resolve(e,t))}function o(){t(n,r)}var a=!1,s=l(o);"error"===s.status&&r(s.value)}function l(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function c(e){return e instanceof this?e:y.resolve(new this(n),e)}function f(e){var t=new this(n);return y.reject(t,e)}function h(e){function t(e,t){function n(e){s[t]=e,++i!==o||a||(a=!0,y.resolve(l,s))}r.resolve(e).then(n,function(e){a||(a=!0,y.reject(l,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,a=!1;if(!o)return this.resolve([]);for(var s=new Array(o),i=0,u=-1,l=new this(n);++u<o;)t(e[u],u);return l}function p(e){function t(e){r.resolve(e).then(function(e){a||(a=!0,y.resolve(i,e))},function(e){a||(a=!0,y.reject(i,e))})}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var o=e.length,a=!1;if(!o)return this.resolve([]);for(var s=-1,i=new this(n);++s<o;)t(e[s]);return i}var d=e("immediate"),y={},m=["REJECTED"],v=["FULFILLED"],w=["PENDING"];t.exports=r=o,o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){if("function"!=typeof e&&this.state===v||"function"!=typeof t&&this.state===m)return this;var r=new this.constructor(n);if(this.state!==w){var o=this.state===v?e:t;s(r,o,this.outcome)}else this.queue.push(new a(r,e,t));return r},a.prototype.callFulfilled=function(e){y.resolve(this.promise,e)},a.prototype.otherCallFulfilled=function(e){s(this.promise,this.onFulfilled,e)},a.prototype.callRejected=function(e){y.reject(this.promise,e)},a.prototype.otherCallRejected=function(e){s(this.promise,this.onRejected,e)},y.resolve=function(e,t){var r=l(i,t);if("error"===r.status)return y.reject(e,r.value);var n=r.value;if(n)u(e,n);else{e.state=v,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},y.reject=function(e,t){e.state=m,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},r.resolve=c,r.reject=f,r.all=h,r.race=p},{immediate:3}],3:[function(e,t,r){(function(e){"use strict";function r(){c=!0;for(var e,t,r=f.length;r;){for(t=f,f=[],e=-1;++e<r;)t[e]();r=f.length}c=!1}function n(e){1!==f.push(e)||c||o()}var o,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var s=0,i=new a(r),u=e.document.createTextNode("");i.observe(u,{characterData:!0}),o=function(){u.data=s=++s%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)o="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){r(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(r,0)};else{var l=new e.MessageChannel;l.port1.onmessage=r,o=function(){l.port2.postMessage(0)}}var c,f=[];t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var l,c,f,h,p=i.test(e),d=typeof t,y=this,m=0;for("object"!==d&&"string"!==d&&(r=t,t=null),r&&"function"!=typeof r&&(r=s.parse),t=a(t);m<u.length;m++)c=u[m],l=c[0],h=c[1],l!==l?y[h]=e:"string"==typeof l?~(f=e.indexOf(l))&&("number"==typeof c[2]?(y[h]=e.slice(0,f),e=e.slice(f+c[2])):(y[h]=e.slice(f),e=e.slice(0,f))):(f=l.exec(e))&&(y[h]=f[1],e=e.slice(0,e.length-f[0].length)),y[h]=y[h]||(c[3]||"port"===h&&p?t[h]||"":""),c[4]&&(y[h]=y[h].toLowerCase());r&&(y.query=r(y.query)),o(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(c=y.auth.split(":"),y.username=c[0]||"",y.password=c[1]||""),y.href=y.toString()}var o=e("requires-port"),a=e("./lolcation"),s=e("querystringify"),i=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];n.prototype.set=function(e,t,r){var n=this;return"query"===e?("string"==typeof t&&t.length&&(t=(r||s.parse)(t)),n[e]=t):"port"===e?(n[e]=t,o(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="")):"hostname"===e?(n[e]=t,n.port&&(t+=":"+n.port),n.host=t):"host"===e?(n[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),n.hostname=t[0],n.port=t[1])):n[e]=t,n.href=n.toString(),n},n.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,r=this,n=r.protocol+"//";return r.username&&(n+=r.username,r.password&&(n+=":"+r.password),n+="@"),n+=r.hostname,r.port&&(n+=":"+r.port),n+=r.pathname,t="object"==typeof r.query?e(r.query):r.query,t&&(n+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(n+=r.hash),n},n.qs=s,n.location=a,t.exports=n},{"./lolcation":5,querystringify:6,"requires-port":7}],5:[function(e,t,r){(function(r){"use strict";var n,o={hash:1,query:1};t.exports=function(t){t=t||r.location||{},n=n||e("./");var a,s={},i=typeof t;if("blob:"===t.protocol)s=new n(unescape(t.pathname),{});else if("string"===i){s=new n(t,{});for(a in o)delete s[a]}else if("object"===i)for(a in t)a in o||(s[a]=t[a]);return s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":4}],6:[function(e,t,r){"use strict";function n(e){for(var t,r=/([^=?&]+)=([^&]*)/g,n={};t=r.exec(e);n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return n}function o(e,t){t=t||"";var r=[];"string"!=typeof t&&(t="?");for(var n in e)a.call(e,n)&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r.length?t+r.join("&"):""}var a=Object.prototype.hasOwnProperty;r.stringify=o,r.parse=n},{}],7:[function(e,t,r){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],8:[function(e,t,r){(function(r){"use strict";var n=e("./jsonp"),o=e("lie");t.exports=function(e,t){if(t=t||{},t.jsonp)return n(e,t);var a,s,i=new o(function(n,o){s=o,void 0===r.XMLHttpRequest&&o("XMLHttpRequest is not supported");var i;a=new r.XMLHttpRequest,a.open("GET",e),a.onreadystatechange=function(){4===a.readyState&&(a.status<400&&t.local||200===a.status?(r.JSON?i=JSON.parse(a.responseText):o(new Error("JSON is not supported")),n(i)):o(a.status?a.statusText:"Attempted cross origin request without CORS enabled"))},a.send()});return i["catch"](function(e){return a.abort(),e}),i.abort=s,i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./jsonp":10,lie:2}],9:[function(e,t,r){(function(t){"use strict";var r=t.L||e("leaflet"),n=e("lie"),o=e("./ajax"),a=(t._||e("lodash"),e("footils"));r.GeoJSON.Cloudant=r.FeatureGroup.extend({defaultAjaxParams:{dataType:"jsonp",callbackParam:"callback",local:!1,middleware:function(e){return e}},defaultSourceParams:{refreshSeconds:0},defaultGeoJsonParams:{pointToLayer:!1,onEachFeature:!1,filter:!1,coordsToLatLng:!1},options:{},initialize:function(e){r.Util.setOptions(this,e),this._layers={},this._sources={},this.on("cloudant:data:loaded",function(){this.filter&&this.refilter(this.filter)},this)},sourceAdd:function(e,t,n){a.paramOrError(e,"IDENTIFIER is required when updating a source"),a.paramOrError(t,"URL is required when adding a source"),e in this._sources&&this.sourceRemove(e),this._sources[e]={},this._sources[e].url=t;var o=r.Util.extend({},this.defaultAjaxParams);for(var s in n)this.defaultAjaxParams.hasOwnProperty(s)&&(o[s]=n[s]);this._sources[e].ajaxParams=o,this._sources[e].ajaxParams.dataType=new RegExp("^(?:[a-z]+:)?//","i").test(t)?"jsonp":"json";var i=r.Util.extend({},this.defaultSourceParams);for(var s in n)this.defaultSourceParams.hasOwnProperty(s)&&(i[s]=n[s]);this._sources[e].params=i;var u=r.Util.extend({},this.defaultGeoJsonParams);for(var s in n)this.defaultGeoJsonParams.hasOwnProperty(s)&&(u[s]=n[s]);this._sources[e].layer=r.geoJson(null,u).addTo(this),this.fire("cloudant:sourceAdd",{identifier:e,source:this._sources[e]}),this._refresh(this._sources[e]),this._refreshSchedule(this._sources[e])},sourceRemove:function(e){if(a.paramOrError(e,"IDENTIFIER is required when updating a source"),e in this._sources){var t=this._sources[e];this._refreshCancel(t),this.removeLayer(t.layer),delete this._sources[e]}},sourceUpdate:function(e,t){if(a.paramOrError(e,"IDENTIFIER is required when updating a source"),a.paramOrError(t,"URL is required when updating a source"),e in this._sources){var r=this._sources[e];this._refreshCancel(r),r.url=t,this._refresh(r),this._refreshSchedule(r)}},refilter:function(e){"function"!=typeof e?(this.filter=!1,this.eachLayer(function(e){e.setStyle({stroke:!0,clickable:!0})})):(this.filter=e,this.eachLayer(function(t){e(t.feature)?t.setStyle({stroke:!0,clickable:!0}):t.setStyle({stroke:!1,clickable:!1})}))},_refresh:function(e){var t=this;"jsonp"===e.ajaxParams.dataType.toLowerCase()?r.Util.jsonp(e.url,e.ajaxParams).then(function(r){var n=e.ajaxParams.middleware(r);e.layer.clearLayers(),e.layer.addData(n),t.fire("cloudant:data:loaded",n)},function(e){t.fire("cloudant:data:loaded",{error:e})}):o(e.url,e.ajaxParams).then(function(r){var n=e.ajaxParams.middleware(r);e.layer.clearLayers(),e.layer.addData(n),t.fire("cloudant:data:loaded",n)},function(e){t.fire("cloudant:data:loaded",{error:e})})},_refreshCancel:function(e){clearInterval(e.refreshTimer)},_refreshSchedule:function(e){var t=this;t._refreshCancel(e),e.params.refreshSeconds>0&&(e.refreshTimer=setInterval(function(){t._refresh(e)},1e3*e.params.refreshSeconds))}}),r.Util.Promise=n,r.Util.ajax=o,r.Util.jsonp=e("./jsonp"),r.geoJson.cloudant=function(e){return new r.GeoJSON.Cloudant(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":8,"./jsonp":10,footils:1,leaflet:"leaflet",lie:2,lodash:"lodash"}],10:[function(e,t,r){(function(r){"use strict";var n=r.L||e("leaflet"),o=e("lie");t.exports=function(e,t){t=t||{};var a,s,i,u,l=document.getElementsByTagName("head")[0],c=n.DomUtil.create("script","",l),f=new o(function(n,o){u=o;var f=t.cbParam||"callback";t.callbackName?a=t.callbackName:(i="_"+(""+Math.random()).slice(2),a="_leafletJSONPcallbacks."+i),c.type="text/javascript",i&&(r._leafletJSONPcallbacks||(r._leafletJSONPcallbacks={length:0}),r._leafletJSONPcallbacks.length++,r._leafletJSONPcallbacks[i]=function(e){l.removeChild(c),delete r._leafletJSONPcallbacks[i],r._leafletJSONPcallbacks.length--,r._leafletJSONPcallbacks.length||delete r._leafletJSONPcallbacks,n(e)}),s=-1===e.indexOf("?")?e+"?"+f+"="+a:e+"&"+f+"="+a,c.src=s}).then(null,function(e){return l.removeChild(c),delete n.Util.ajax.cb[i],e});return f.abort=u,f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{leaflet:"leaflet",lie:2}]},{},[9]);
